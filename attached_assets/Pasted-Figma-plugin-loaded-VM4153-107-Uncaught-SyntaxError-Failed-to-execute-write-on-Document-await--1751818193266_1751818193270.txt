Figma plugin loaded
VM4153:107 Uncaught SyntaxError: Failed to execute 'write' on 'Document': await is only valid in async functions and the top level bodies of modules
    at onmessage (data:text/html;base64,PHNjcmlwdD4KICAgICAgb25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gd2luZG93LnBhcmVudC5wYXJlbnQucGFyZW50ICYmIGV2ZW50Lm9yaWdpbiA9PT0gImh0dHBzOi8vd3d3LmZpZ21hLmNvbSIpIHsKICAgICAgICAgIGRvY3VtZW50LndyaXRlKCI8c2NyaXB0PiIgKyAiXG4gZG9jdW1lbnQuY2xvc2UoKTtcbiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgIGlmIChlLmtleUNvZGUgPT09IDgwIC8qIFAgKi8gJiYgIWUuc2hpZnRLZXkgJiYgZS5hbHRLZXkgJiYgZS5jdHJsS2V5ICYmICFlLm1ldGFLZXkpIHtcbiAgICAgLy8gSGFuZGxlIHRoZSBwbHVnaW4gcmUtcnVuIHNob3J0Y3V0XG4gICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoJyRJTlRFUk5BTF9ET19OT1RfVVNFJFJFUlVOX1BMVUdJTiQnLCAnKicpXG4gICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxuICAgfSBlbHNlIGlmICh0cnVlKSB7XG4gICAgIC8vIEhhbmRsZSBTZWxlY3QgQWxsLCBVbmRvIGFuZCBSZWRvIGluIHRoZSBkZXNrdG9wIGFwcFxuICAgICBjb25zdCBjdHJsRG93biA9IGUuY3RybEtleVxuICAgICBpZiAoY3RybERvd24pIHtcbiAgICAgICBpZiAoZS5rZXlDb2RlID09PSA2NSAvKiBBICovKSB7XG4gICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnc2VsZWN0QWxsJylcbiAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gOTAgLyogWiAqLykge1xuICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKVxuICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKVxuICAgICAgICAgfVxuICAgICAgIH0gZWxzZSBpZiAoKGUua2V5ID09PSAneCcgfHwgZS5rZXkgPT09ICdYJykgJiYgZmFsc2UpIHtcbiAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjdXQnKVxuICAgICAgIH0gZWxzZSBpZiAoKGUua2V5ID09PSAnYycgfHwgZS5rZXkgPT09ICdDJykgJiYgZmFsc2UpIHtcbiAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICAgICB9IGVsc2UgaWYgKChlLmtleSA9PT0gJ3YnIHx8IGUua2V5ID09PSAnVicpICYmIGZhbHNlKSB7XG4gICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgncGFzdGUnKVxuICAgICAgIH1cbiAgICAgfVxuICAgfVxuIH0sIHRydWUpXG5cbiBmdW5jdGlvbiByZW5kZXJDc3NWYXJpYWJsZXModmFycykge1xuICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhcnMpXG4gICAgIC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5qb2luKCc6ICcpKVxuICAgICAuam9pbignOyAnKSArICc7J1xuIH1cblxuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgIGlmIChcbiAgICAgZXZlbnQuc291cmNlID09PSB3aW5kb3cucGFyZW50LnBhcmVudC5wYXJlbnQgJiZcbiAgICAgZXZlbnQuZGF0YSAmJlxuICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ29iamVjdCcgJiZcbiAgICAgJ2ZpZ21hTWVzc2FnZScgaW4gZXZlbnQuZGF0YVxuICAgKSB7XG4gICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG5cbiAgICAgY29uc3QgZmlnbWFNZXNzYWdlID0gZXZlbnQuZGF0YS5maWdtYU1lc3NhZ2VcblxuICAgICBpZiAoZmlnbWFNZXNzYWdlLnR5cGUgPT09ICdUSEVNRScpIHtcbiAgICAgICBjb25zdCBmaWdtYVN0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZ21hLXN0eWxlJylcbiAgICAgICBmaWdtYVN0eWxlLnRleHRDb250ZW50ID0gJzpyb290IHsgJyArIHJlbmRlckNzc1ZhcmlhYmxlcyhmaWdtYU1lc3NhZ2UucGF5bG9hZC52YXJpYWJsZXMpICsgJyB9J1xuXG4gICAgICAgY29uc3QgY2xhc3Nlc1RvUmVtb3ZlID0gW11cblxuICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdmaWdtYS0nKSkge1xuICAgICAgICAgICBjbGFzc2VzVG9SZW1vdmUucHVzaCh2YWx1ZSlcbiAgICAgICAgIH1cbiAgICAgICB9KVxuXG4gICAgICAgZm9yIChjb25zdCBjbGFzc05hbWUgb2YgY2xhc3Nlc1RvUmVtb3ZlKSB7XG4gICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gICAgICAgfVxuXG4gICAgICAgaWYgKGZpZ21hTWVzc2FnZS5wYXlsb2FkLm5hbWUgJiYgZmlnbWFNZXNzYWdlLnBheWxvYWQubmFtZSAhPT0gJ2xlZ2FjeScpIHtcbiAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdmaWdtYS0nICsgZmlnbWFNZXNzYWdlLnBheWxvYWQubmFtZSlcbiAgICAgICB9XG4gICAgIH1cbiAgIH1cbiB9LCB0cnVlKVxuICIgKyAiIiArICJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3NlY3VyaXR5cG9saWN5dmlvbGF0aW9uJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoZXZlbnQuYmxvY2tlZFVSSSlcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgcmVzb3VyY2UgZnJvbScsIGV2ZW50LmJsb2NrZWRVUkksICdzaW5jZSBpdCBpcyBub3QgaW4gdGhlIGxpc3Qgb2YgYWxsb3dlZCBkb21haW5zLiBQbGVhc2UgYWRkJywgJ1wiJyArIHVybC5vcmlnaW4gKyAnXCInLCAndG8gdGhlIG5ldHdvcmtBY2Nlc3MgPiBhbGxvd2VkRG9tYWlucyBmaWVsZCBpbiB5b3VyIG1hbmlmZXN0Lmpzb24uJylcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdG8gbWFrZSBzdXJlIHdlIGRvbid0IGNyYXNoIGlmIHRoZSBibG9ja2VkVVJJIGlzIG5vdCBhIHZhbGlkIFVSTC5cbiAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiBzaW5jZSB3ZSdyZSBnZXR0aW5nIHRoZSB1cmwgZnJvbSB0aGUgV2ViIEFQSSwgYnV0IGJldHRlciBzYWZlIHRoYW4gc29ycnkuXG4gICAgICAgICAgfVxuICAgICAgICB9KSIgKyAiPC8iICsgInNjcmlwdD4iICsgZXZlbnQuZGF0YSkKICAgICAgICB9CiAgICAgIH0KCiAgPC9zY3JpcHQ+:4:20)